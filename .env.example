# =============================================================================
# FileHatch Environment Configuration
# =============================================================================
# 이 파일을 .env로 복사한 후 값을 수정하세요:
#   cp .env.example .env
#
# 주의: 프로덕션 환경에서는 반드시 모든 시크릿 값을 변경하세요!
# =============================================================================

# -----------------------------------------------------------------------------
# 기본 설정
# -----------------------------------------------------------------------------

# 타임존 설정 (기본: Asia/Seoul)
TZ=Asia/Seoul

# 외부 접속 URL (리버스 프록시 사용 시 설정)
# SSO 콜백 URL 등 외부에서 접근하는 URL 생성에 사용됩니다.
#
# 우선순위:
#   1. EXTERNAL_URL 환경변수 (설정된 경우)
#   2. X-Forwarded-Host/X-Forwarded-Proto 헤더 (리버스 프록시가 전달)
#   3. 요청의 Host 헤더 (기본)
#
# 리버스 프록시가 X-Forwarded-* 헤더를 전달하면 이 값을 비워둬도 됩니다.
# 헤더 전달이 불가능한 환경에서는 이 값을 설정하세요.
#
# 예: https://vault.example.com
EXTERNAL_URL=

# -----------------------------------------------------------------------------
# 보안 설정 (프로덕션에서 반드시 변경!)
# -----------------------------------------------------------------------------

# JWT 서명 키 (32자 이상의 랜덤 문자열 권장)
# 생성 예: openssl rand -hex 32
JWT_SECRET=change-this-to-a-very-long-random-secret-key-in-production

# 암호화 키 (32바이트 = 64자 hex, AES-256용)
# 생성 예: openssl rand -hex 32
ENCRYPTION_KEY=change-this-to-a-32-byte-hex-key-for-aes256-encryption

# -----------------------------------------------------------------------------
# 데이터베이스 설정 (PostgreSQL)
# -----------------------------------------------------------------------------

# 데이터베이스 호스트 (Docker 내부: db, 외부: localhost 또는 IP)
DB_HOST=db
DB_PORT=5432

# 데이터베이스 인증 정보 (프로덕션에서 반드시 변경!)
DB_USER=fh_user
DB_PASS=fh_password
DB_NAME=fh_main

# PostgreSQL 설정 (docker-compose용)
POSTGRES_USER=${DB_USER}
POSTGRES_PASSWORD=${DB_PASS}
POSTGRES_DB=${DB_NAME}

# -----------------------------------------------------------------------------
# 캐시 설정 (Valkey/Redis)
# -----------------------------------------------------------------------------

VALKEY_HOST=valkey
VALKEY_PORT=6379

# Valkey 비밀번호 (선택, 프로덕션 권장)
# VALKEY_PASSWORD=your-valkey-password

# -----------------------------------------------------------------------------
# 파일 스토리지 설정
# -----------------------------------------------------------------------------

# 데이터 디렉토리 경로 (호스트 경로)
DATA_PATH=./data

# 설정 파일 경로 (호스트 경로)
CONFIG_PATH=./config

# 데이터베이스 데이터 경로 (호스트 경로)
DATABASE_PATH=./database

# -----------------------------------------------------------------------------
# CORS 설정
# -----------------------------------------------------------------------------

# 허용된 오리진 (쉼표로 구분, * = 모두 허용)
# 프로덕션에서는 실제 도메인만 허용
CORS_ALLOWED_ORIGINS=*

# -----------------------------------------------------------------------------
# WebSocket 설정
# -----------------------------------------------------------------------------

# WebSocket 연결 허용 오리진 (쉼표로 구분)
# 리버스 프록시 사용 시 반드시 외부 도메인을 설정하세요.
# 미설정 시 개발 모드에서는 localhost만 허용됩니다.
#
# 예: https://file.example.com
# 예: https://file.example.com,https://backup.example.com
ALLOWED_ORIGINS=

# -----------------------------------------------------------------------------
# OnlyOffice 설정 (선택 - docker compose --profile office)
# -----------------------------------------------------------------------------

# OnlyOffice 내부 URL (Docker 네트워크)
ONLYOFFICE_URL=http://onlyoffice

# OnlyOffice 외부 접속 URL
# 예: https://office.example.com 또는 http://192.168.1.100:8088
ONLYOFFICE_PUBLIC_URL=

# -----------------------------------------------------------------------------
# SMB/Samba 설정
# -----------------------------------------------------------------------------

# SMB 워크그룹
SMB_WORKGROUP=WORKGROUP

# -----------------------------------------------------------------------------
# 포트 설정
# -----------------------------------------------------------------------------

# 웹 UI 포트
UI_PORT=3080

# OnlyOffice 포트 (--profile office 사용 시)
ONLYOFFICE_PORT=8088

# -----------------------------------------------------------------------------
# 로깅 설정
# -----------------------------------------------------------------------------

# 로그 레벨 (debug, info, warn, error)
LOG_LEVEL=info

# 감사 로그 보관 기간 (일)
AUDIT_LOG_RETENTION_DAYS=365

# -----------------------------------------------------------------------------
# 성능 설정
# -----------------------------------------------------------------------------

# 최대 업로드 파일 크기 (바이트, 기본: 10GB)
MAX_UPLOAD_SIZE=10737418240

# 썸네일 캐시 크기 (MB)
THUMBNAIL_CACHE_SIZE_MB=500

# -----------------------------------------------------------------------------
# SSO/Keycloak 설정 (선택 - docker compose --profile sso)
# -----------------------------------------------------------------------------

# Keycloak 포트 (기본: 8180)
KEYCLOAK_PORT=8180

# Keycloak 관리자 계정
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=admin123

# Keycloak 호스트명 (외부 접속 시 서버 IP 또는 도메인)
# 예: 192.168.1.100 또는 auth.example.com
KEYCLOAK_HOSTNAME=localhost

# -----------------------------------------------------------------------------
# 개발 설정
# -----------------------------------------------------------------------------

# 개발 모드 (true = 상세 에러 메시지)
DEV_MODE=false
